import type {SavedLink} from '@/types';import {useState} from 'react';import {t}from '@/lib/i18n';import QRCodeModal from './QRCodeModal';export default function LinkCard({item,onToggleFav,onEdit,onDelete}:{item:SavedLink;onToggleFav:(id:string,next:boolean)=>void;onEdit:(id:string)=>void;onDelete:(id:string)=>void;}){const[qr,setQr]=useState(false);async function share(){try{if(navigator.share){await navigator.share({title:item.title,url:item.url,text:item.notes});}else{await navigator.clipboard.writeText(item.url);alert(t('copied'));}}catch{}}return(<article className='card flex gap-4 items-start'><div className='flex-1 min-w-0'><h3 className='font-semibold text-lg break-words'>{item.title}</h3><a className='text-blue-600 underline break-all' href={item.url} target='_blank' rel='noopener noreferrer'>{item.url}</a>{item.notes&&<p className='mt-1 text-sm opacity-80'>{item.notes}</p>}<div className='mt-2 flex flex-wrap gap-2 text-xs opacity-70'>{item.tags.map(tag=><span key={tag} className='px-2 py-1 rounded-xl bg-neutral-100 dark:bg-neutral-700'>#{tag}</span>)}</div></div><div className='flex flex-col gap-2'><button aria-label={item.favorite?t('unfavorite'):t('favorite')} className='btn btn-secondary' onClick={()=>onToggleFav(item.id,!item.favorite)}>{item.favorite?'★':'☆'}</button><button aria-label={t('qr_code')} className='btn btn-secondary' onClick={()=>setQr(true)}>QR</button><button aria-label={t('share')} className='btn btn-secondary' onClick={share}>{t('share')}</button><button aria-label={t('edit')} className='btn btn-secondary' onClick={()=>onEdit(item.id)}>{t('edit')}</button><button aria-label={t('delete')} className='btn btn-secondary' onClick={()=>onDelete(item.id)}>{t('delete')}</button></div>{qr&&<QRCodeModal url={item.url} onClose={()=>setQr(false)}/>}</article>)}
